#01-02 00:40

#===========================================

# é«˜çº§è®¾ç½®
[General]

# æ—¥å¿—ç­‰çº§: warning, notify, info, verbose (é»˜è®¤å€¼: notify) 
loglevel = notify

# è·³è¿‡æŸä¸ªåŸŸåæˆ–è€… IP æ®µ, è¿™äº›ç›®æ ‡ä¸»æœºå°†ä¸ä¼šç”± Surge Proxy å¤„ç†
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8, localhost, *.local, *.crashlytics.com

# å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šçš„ DNS æœåŠ¡å™¨
dns-server = 182.254.116.116, 119.29.107.85, 223.5.5.5, 223.6.6.6, 119.29.29.29

# å…è®¸å¤–éƒ¨æ§åˆ¶å™¨è®¿é—® Surge, Surge Dashboard æˆ– Surge CLI è¿›è¡Œç®¡ç†æ§åˆ¶
external-controller-access = yuan1am@0.0.0.0:6170

# æ˜¯å¦å¯åŠ¨å®Œæ•´çš„ IPv6 æ”¯æŒ (é»˜è®¤å€¼: false)
ipv6 = false

# TUNè§„åˆ™åŒ¹é…æ¨¡å¼ (é»˜è®¤å€¼: false)
enhanced-mode-by-rule = 1

# æ‹’ç»é¡µé¢æ˜¾ç¤ºé”™è¯¯
show-error-page-for-reject = true

# ä¸åŒ…æ‹¬ç®€å•ä¸»æœºå
exclude-simple-hostnames = true

# Surge ä½œä¸º HTTP/SOCKS5 ä»£ç†æœåŠ¡å™¨å‘ Wi-Fi ç½‘ç»œä¸‹çš„å…¶ä»–è®¾å¤‡æä¾›æœåŠ¡å™¨
allow-wifi-access = true

# Surge iOS ä¾›å¤–ç½‘è®¿é—®çš„æœåŠ¡ç«¯å£
# HTTP ä»£ç†æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6152)
wifi-access-http-port = 7890

# SOCKS5 ä»£ç†æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6153)
wifi-access-socks5-port = 7891

# Surge Mac ä¾›å¤–ç½‘è®¿é—®çš„æœåŠ¡ç«¯å£
# HTTP ä»£ç†æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6152)
http-listen = 0.0.0.0:7890

# SOCKS5 ä»£ç†æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6153)
socks5-listen = 0.0.0.0:7891

# å…¼å®¹æ¨¡å¼ï¼ˆé»˜è®¤ç¦ç”¨)(ç¦ç”¨=0,Proxy with Loopback Address=1,Proxy Only=2,TUN Only=3)
compatibility-mode = 0

# å¯ç”¨ Network.framework (é»˜è®¤å€¼: false)
network-framework = true

# INTERNET æµ‹è¯• URL (ä½¿ç”¨ç½‘ç»œè¯Šæ–­åŠŸèƒ½æ—¶è®¿é—®çš„ URL)
internet-test-url = http://www.qualcomm.cn/generate_204

# ä»£ç†æµ‹é€Ÿ URL (æµ‹è¯•ä»£ç†ç­–ç•¥æ—¶çš„ URL)
proxy-test-url = http://www.qualcomm.cn/generate_204

# æµ‹é€Ÿè¶…æ—¶ (ç§’)
test-timeout = 3

#å¼ºåˆ¶ TCP è¿æ¥ä¸º HTTP è¿æ¥
force-http-engine-hosts = api.joybj.com

#è¿”å›çœŸå® IP
always-real-ip = *.apple.com

#åŠ«æŒå…¶å®ƒ DNS æœåŠ¡å™¨
hijack-dns = 8.8.8.8:53

#ç»•è¿‡ç‰¹å®š IP èŒƒå›´
tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12

#åŒ…å«ç‰¹å®š IP èŒƒå›´
tun-included-routes = 192.168.1.12/32

replica = false


#===========================================

# è¯¥æ®µå®šä¹‰æŠ“å–æµé‡çš„è¿‡æ»¤
[Replica]

# éšè—æ‰€æœ‰å‘å¾€ *.Apple.com å’Œ *.icloud.com çš„è¯·æ±‚ï¼ˆè¯¥é€‰é¡¹åªæ˜¯åœ¨æŠ“å–ç»“æœä¸­éšè—äº†è¯·æ±‚ï¼‰
hide-apple-request = true

# éšè—Crashlyticsè¯·æ±‚
hide-crashlytics-request = true

# éšè—UDPä¼šè¯ï¼ˆé»˜è®¤å€¼: falseï¼‰
hide-udp = false

# ä½¿ç”¨å…³é”®è¯è¿‡æ»¤å™¨ï¼ˆé»˜è®¤å€¼: falseï¼‰
keyword-filter-type = false

#===========================================

[Proxy]
ğŸš€ Direct = direct
ğŸµ Netease Unlock 1 = http, netease1.xwdsh.xyz, 8080, username=dler, password=cloud, always-use-connect=true
ğŸµ Netease Unlock 2 = http, netease2.xwdsh.xyz, 8080, username=dler, password=cloud, always-use-connect=true
ğŸµ Netease Unlock 3 = http, netease3.xwdsh.xyz, 8080, username=dler, password=cloud, always-use-connect=true

#===========================================


# è¯¥æ®µå®šä¹‰å¯ç”¨çš„ç­–ç•¥ç»„,å®ç°åˆ†æµ
[Proxy Group]

# å›½å¤–ä¸Šç½‘ç­–ç•¥
ğŸš€ çº¢æå‡ºå¢™ = select, ğŸ‡­ğŸ‡°é¦™æ¸¯iplc, ğŸ‡­ğŸ‡°é¦™æ¸¯pro, ğŸ‡­ğŸ‡°é¦™æ¸¯bgp, ğŸ”˜ DIRECT

# å›½é™…åª’ä½“ç­–ç•¥ç»„
ğŸ¬ å›½å¤–è§†é¢‘ = select, ğŸ‡­ğŸ‡°é¦™æ¸¯iplc, ğŸ‡­ğŸ‡°é¦™æ¸¯pro, ğŸ‡­ğŸ‡°é¦™æ¸¯bgp

# å›½é™…åª’ä½“ç­–ç•¥ç»„
ğŸ¬ Netflix = select, ğŸ‡­ğŸ‡°é¦™æ¸¯iplc, ğŸ‡­ğŸ‡°é¦™æ¸¯pro, ğŸ‡­ğŸ‡°é¦™æ¸¯bgp

# å›½é™…åª’ä½“ç­–ç•¥ç»„
ğŸ¬ YouTube = select, ğŸ‡­ğŸ‡°é¦™æ¸¯iplc, ğŸ‡­ğŸ‡°é¦™æ¸¯pro, ğŸ‡­ğŸ‡°é¦™æ¸¯bgp

#Telegramç­–ç•¥
ğŸ’¬ Telegram = select, ğŸ‡¸ğŸ‡¬æ–°åŠ å¡ IPLC, ğŸ‡­ğŸ‡°é¦™æ¸¯iplc, ğŸ‡­ğŸ‡°é¦™æ¸¯pro, ğŸ‡­ğŸ‡°é¦™æ¸¯bgp

# Apple æœåŠ¡ç­–ç•¥ç»„
ï£¿ è‹¹æœä¼˜åŒ– = select, ğŸ”˜ DIRECT, ğŸ‡­ğŸ‡°é¦™æ¸¯iplc, ğŸ‡­ğŸ‡°é¦™æ¸¯pro, ğŸ‡­ğŸ‡°é¦™æ¸¯bgp

#ç½‘æ˜“äº‘éŸ³ä¹è§£é”
ğŸ¶ Netease Music = select, ğŸ”˜ DIRECT, ğŸµ Netease Unlock 1, ğŸµ Netease Unlock 2, ğŸµ Netease Unlock 3

#Speedtestæµ‹é€Ÿ
ğŸ›£ Speedtest = select, ğŸ”˜ DIRECT, ğŸš€ çº¢æå‡ºå¢™

# å»å¹¿å‘Šä»¥åŠéšç§è¿½è¸ªä¿æŠ¤å¼€å…³ä»¥åŠåè¿è¥å•†åŠè‡­åæ˜­è‘—çš„åº”ç”¨åŠ«æŒä¿æŠ¤å¼€å…³(Direct ä¸æ‹¦æˆªå¹¿å‘Š, Ad-Block ç›´æ¥æ‹’ç», Ad-GIF è¿”å›ä¸€ä¸ªé€æ˜åƒç´ å›¾)
ğŸš« å»å¹¿å‘Šä¸ååŠ«æŒ = select, policy-path=https://git.io/fjYpz, update-interval=21600

# å›½å†…ä¸Šç½‘ç­–ç•¥,ç›´è¿=ğŸ”˜DIRECT,ä»£ç†=ğŸš€çº¢æå‡ºå¢™
ğŸ‡¨ğŸ‡³ å›½å†…ä¸Šç½‘ = select, ğŸ”˜ DIRECT, ğŸš€ çº¢æå‡ºå¢™

# å›½å†…åª’ä½“ç­–ç•¥ç»„
ğŸ¬ å›½å†…è§†é¢‘ = select, ğŸ”˜ DIRECT, ğŸ‡­ğŸ‡°é¦™æ¸¯pro, ğŸ‡­ğŸ‡°é¦™æ¸¯iplc, ğŸ‡­ğŸ‡°é¦™æ¸¯bgp

# ç™½åå•æ¨¡å¼=ğŸš€çº¢æå‡ºå¢™ï¼Œé»‘åå•æ¨¡å¼=ğŸ”˜DIRECT
â˜‘ï¸ é»‘ç™½åå• = select, ğŸš€ çº¢æå‡ºå¢™, ğŸ”˜ DIRECT

#ç›´è¿ç­–ç•¥
ğŸ”˜ DIRECT = select, policy-path=https://raw.githubusercontent.com/ydzydzydz/Rules/master/Surge/resources/policy/direct.list, update-interval=21600

# èŠ‚ç‚¹
ğŸ‡­ğŸ‡°é¦™æ¸¯iplc = url-test, policy-path=iplc.list, url=http://www.gstatic.com/generate_204, interval=1800, timeout=3, tolerance=30
ğŸ‡­ğŸ‡°é¦™æ¸¯pro = url-test, policy-path=pro.list, url=http://www.gstatic.com/generate_204, interval=1800, timeout=3, tolerance=30
ğŸ‡­ğŸ‡°é¦™æ¸¯bgp = url-test, policy-path=bgp.list, url=http://www.gstatic.com/generate_204, interval=1800, timeout=3, tolerance=30
ğŸ‡¸ğŸ‡¬æ–°åŠ å¡ IPLC = url-test, policy-path=sg.list, url=http://www.gstatic.com/generate_204, interval=1800, timeout=3, tolerance=30

#===========================================

# è§„åˆ™å®šä¹‰éƒ¨åˆ†
[Rule]

DOMAIN-SUFFIX,lajiaopic.com,ğŸ¬ å›½å†…è§†é¢‘

#TikTokå°åŒºè§£é”
DOMAIN,api-h2.tiktokv.com,ğŸš€ çº¢æå‡ºå¢™
DOMAIN,api2-16-h2.musical.ly,ğŸš€ çº¢æå‡ºå¢™
DOMAIN,api2-19-h2.musical.ly,ğŸš€ çº¢æå‡ºå¢™

# è‡ªå®šä¹‰è§„åˆ™
// è‡ªå®šä¹‰è§„åˆ™
RULE-SET,https://raw.githubusercontent.com/ydzydzydz/Rules/master/Surge/resources/ruleset/custom/mydirect.list,ğŸ”˜ DIRECT,update-interval=21600
// è‡ªå®šä¹‰è§„åˆ™
RULE-SET,https://raw.githubusercontent.com/ydzydzydz/Rules/master/Surge/resources/ruleset/custom/myreject.list,ğŸš« å»å¹¿å‘Šä¸ååŠ«æŒ,update-interval=21600
// è‡ªå®šä¹‰è§„åˆ™
RULE-SET,https://raw.githubusercontent.com/ydzydzydz/Rules/master/Surge/resources/ruleset/custom/mytingif.list,ğŸš« å»å¹¿å‘Šä¸ååŠ«æŒ,update-interval=21600
// è‡ªå®šä¹‰è§„åˆ™
RULE-SET,https://raw.githubusercontent.com/ydzydzydz/Rules/master/Surge/resources/ruleset/custom/myproxy.list,ğŸš€ çº¢æå‡ºå¢™,update-interval=21600
# ç‰¹æ®Šä»£ç†
// Telegram
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/Telegram.list,ğŸ’¬ Telegram,update-interval=21600
// Netflix
RULE-SET,https://raw.githubusercontent.com/ydzydzydz/Rules/master/Surge/resources/ruleset/special/netflix.list,ğŸ¬ Netflix,update-interval=21600
// YouTube
RULE-SET,https://raw.githubusercontent.com/ydzydzydz/Rules/master/Surge/resources/ruleset/special/youtube.list,ğŸ¬ YouTube,update-interval=21600
//Speedtest
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/Speedtest.list,ğŸ›£ Speedtest
//ç½‘æ˜“äº‘éŸ³ä¹è§£é”
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/Netease%20Music.list,ğŸ¶ Netease Music

# lhie1è§„åˆ™
// å¹¿å‘Š
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/Reject.list,ğŸš« å»å¹¿å‘Šä¸ååŠ«æŒ,update-interval=21600                                              
// è‹¹æœ
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/Apple.list,ï£¿ è‹¹æœä¼˜åŒ–,update-interval=21600                                                 
// TeamViewerï¼ŒSteamï¼Œ12306ã€‚ã€‚ã€‚
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/Domestic.list,ğŸ‡¨ğŸ‡³ å›½å†…ä¸Šç½‘,update-interval=21600                                           
// Bilibiliï¼ŒIQIYIï¼Œletvã€‚ã€‚ã€‚
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/AsianTV.list,ğŸ¬ å›½å†…è§†é¢‘,update-interval=21600                                            
// Amazon Prime Videoï¼ŒBBCã€‚ã€‚ã€‚
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/GlobalTV.list,ğŸ¬ å›½å¤–è§†é¢‘,update-interval=21600                                              
// Lineï¼ŒMicrosoftï¼ŒAmazonã€‚ã€‚ã€‚
RULE-SET,https://raw.githubusercontent.com/lhie1/Rules/master/Surge/Surge%203/Provider/Proxy.list,ğŸš€ çº¢æå‡ºå¢™,update-interval=21600                                                 

# Surgeè§„åˆ™
RULE-SET,SYSTEM,ğŸ”˜ DIRECT
# Local Area Network
RULE-SET,LAN,ğŸ”˜ DIRECT
DOMAIN,dler.cloud,ğŸ”˜ DIRECT

# > Private Tracker
DOMAIN-SUFFIX,awesome-hd.me,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,broadcasthe.net,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,chdbits.co,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,classix-unlimited.co.uk,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,empornium.me,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,gazellegames.net,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,hdchina.org,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,hdsky.me,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,icetorrent.org,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,jpopsuki.eu,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,keepfrds.com,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,madsrevolution.net,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,m-team.cc,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,nanyangpt.com,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,ncore.cc,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,open.cd,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,ourbits.club,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,passthepopcorn.me,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,privatehd.to,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,redacted.ch,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,springsunday.net,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,tjupt.org,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,totheglory.im,ğŸ”˜ DIRECT
DOMAIN-KEYWORD,announce,ğŸ”˜ DIRECT
DOMAIN-KEYWORD,torrent,ğŸ”˜ DIRECT
DOMAIN-KEYWORD,tracker,ğŸ”˜ DIRECT
DOMAIN-SUFFIX,smtp,ğŸ”˜ DIRECT
URL-REGEX,(Subject|HELO|SMTP),ğŸ”˜ DIRECT
URL-REGEX,(api|ps|sv|offnavi|newvector|ulog.imap|newloc)(.map|).(baidu|n.shifen).com,ğŸ”˜ DIRECT
URL-REGEX,(.+.|^)(360|so|qihoo|360safe|qhimg|360totalsecurity|yunpan).(cn|com),ğŸ”˜ DIRECT
URL-REGEX,(.+.)?(torrent|announce.php?passkey=|tracker|BitTorrent|bt_key|ed2k|find_node|get_peers|info_hash|magnet:|peer_id=|sandai|Thunder|XLLiveUD|xunlei)(..+)?,ğŸ”˜ DIRECT

IP-CIDR,1.1.1.1/24,ğŸ”˜ DIRECT,no-resolve

# GeoIP China
GEOIP,CN,ğŸ‡¨ğŸ‡³ å›½å†…ä¸Šç½‘
# DNS æŸ¥è¯¢å¤±è´¥èµ° Final è§„åˆ™
FINAL,â˜‘ï¸ é»‘ç™½åå•,dns-failed

#===========================================

# è¦†ç›–ç³»ç»ŸDNSï¼Œè®¾ç½®å’Œé…ç½®æœ¬åœ°DNSæ˜ å°„è®°å½•,è¯¥åŠŸèƒ½ç­‰åŒäº /etc/hosts, åŠ ä¸Šäº†æ³›è§£æå’Œåˆ«åæ”¯æŒã€‚
[Host]

ocsp.apple.com = server:127.0.0.1

# ç‰¹å®šDNSæœåŠ¡å™¨
// æ·˜å®
*.taobao.com = server:223.6.6.6

// å¤©çŒ«
*.tmall.com = server:223.6.6.6

// é˜¿é‡Œäº‘
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5

// è…¾è¿…
*.tencent.com = server:119.28.28.28

// è…¾è®¯QQ
*.qq.com = server:119.28.28.28

// å¾®ä¿¡
*.weixin.com = server:119.28.28.28

// äº¬ä¸œ
*.jd.com = server:119.28.28.28

// å“”å“©å“”å–±
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29

// ç½‘æ˜“
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29

// å°ç±³
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29

// ç™¾åº¦
*.baidu.com = server:system
*.bdstatic.com = server:system

# æŒ‡å®š IP åœ°å€æˆ–å¦ä¸€ä¸ªåŸŸå
// è¿œæ™¯è®ºå›
*.pcbeta.com = 120.52.19.113
cdn.pcbeta.attachment.inimc.com = 120.52.19.113
cdn.pcbeta.static.inimc.com = 120.52.19.113
cdn.pcbeta.css.inimc.com = 120.52.19.113

// IPv6
ip6-localhost = ::1
ip6-loopback = ::1

#===========================================

# è¯¥æ®µå®šä¹‰é’ˆå¯¹ HTTP è¯·æ±‚çš„ URL é‡å®šå‘è§„åˆ™
[URL Rewrite]

// Tiktok
(.*video_id=\w{32})(.*watermark=)(.*) $1 302
(?<=(carrier|account|sys)_region=)CN HK 307

// YouTube å¹¿å‘Š
^https?:\/\/.+\.googlevideo\.com\/.+&oad - reject
^https?:\/\/.+\.googlevideo\.com\/.+ctier - reject

// çŸ³å¢¨æ–‡æ¡£
^https?:\/\/shimo\.im\/api\/ads\?(.+) - reject

// ç™¾åº¦
^https?://www.baidu.com\/\?action=static&ms=1&version=css_page_2@0.* - reject

#===========================================